(this.webpackJsonpmoney=this.webpackJsonpmoney||[]).push([[0],{101:function(e,t,a){"use strict";a.r(t);var n,c=a(0),r=a.n(c),s=a(9),i=a.n(s),u=(a(92),a(53)),l=a.n(u),o=a(54),j=a.n(o),d=a(22),b=a(61),O=a.n(b),h=a(150),v=a(139),x=a(64),p=a(43),f=a(68),m=a.n(f),_=a(149);!function(e){e.ADD_INCOMES="ADD_INCOMES",e.ADD_OUTCOMES="ADD_OUTCOMES"}(n||(n={}));var y=m()().format("YYYY-MM-DD"),D={transactions:[]},g=function(e,t){return{type:n.ADD_INCOMES,day:t,value:e}},N=function(e,t){return{type:n.ADD_OUTCOMES,day:t,value:e}},C=a(69),k=a(70),T=a(78),S=a(77),I=new(function(e){Object(T.a)(a,e);var t=Object(S.a)(a);function a(){var e;return Object(C.a)(this,a),(e=t.call(this,"MoneyManager")).transactions=void 0,e.version(1).stores({transactions:"id, type, value, addDate"}),e}return Object(k.a)(a,[{key:"getData",value:function(){return this.transactions.where("addDate").equals(y).toArray()}}]),a}(a(60).default)),A=a(3),P=function(e){var t=Object(c.useState)(0),a=Object(d.a)(t,2),n=a[0],r=a[1],s=Object(c.useState)(y),i=Object(d.a)(s,2),u=i[0],l=i[1],o=function(){if(n){var t={id:Object(_.a)(),type:e.type,value:n,addDate:u};I.transactions.add(t),r(0)}};return Object(A.jsxs)("div",{className:O.a.textInput,children:[Object(A.jsx)(h.a,{variant:"outlined",onChange:function(e){Number(e.currentTarget.value)?r(+e.currentTarget.value):r(0)},value:n,onKeyPress:function(e){"Enter"===e.key&&o()}}),Object(A.jsx)(v.a,{variant:"contained",color:"primary",onClick:o,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"}),Object(A.jsxs)("div",{className:O.a.datePick,children:[Object(A.jsx)("h3",{children:"\u0412\u044b\u0431\u0435\u0440\u0438 \u0434\u0430\u0442\u0443"}),Object(A.jsx)("input",{type:"date",value:u,onChange:function(e){return l(e.currentTarget.value)}})]})]})},L=function(){return Object(A.jsxs)("main",{className:j.a.main,children:[Object(A.jsxs)("section",{className:j.a.incomeValue,children:[Object(A.jsx)("h3",{children:"\u0414\u043e\u0445\u043e\u0434\u044b"}),Object(A.jsx)(P,{addValue:g,type:"income"})]}),Object(A.jsxs)("section",{className:j.a.outcomeValue,children:[Object(A.jsx)("h3",{children:"\u0420\u0430\u0441\u0445\u043e\u0434\u044b"}),Object(A.jsx)(P,{addValue:N,type:"outcome"})]})]})},M=a(14),w=a.n(M),E=a(102),V=a(42),F=a(12),U=a(140),q=a(41),B=function(){var e=Object(q.useLiveQuery)((function(){return I.table("transactions").where("type").equals("income").toArray()})),t=Object(q.useLiveQuery)((function(){return I.table("transactions").where("type").equals("outcome").toArray()}));if(!e||!t)return null;var a=e.filter((function(e){return e.addDate===y})).reduce((function(e,t){return e+t.value}),0),n=t.filter((function(e){return e.addDate===y})).reduce((function(e,t){return e+t.value}),0),c=a-n;return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)(U.a,{raised:!0,className:w.a.outputCard,children:[Object(A.jsx)("h3",{className:w.a.cardTitle,children:"\u0412\u0441\u0435\u0433\u043e \u0437\u0430\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043e"}),Object(A.jsx)("div",{className:w.a.cardValue,children:a})]}),Object(A.jsxs)(U.a,{raised:!0,className:w.a.outputCard,children:[Object(A.jsx)("h3",{className:w.a.cardTitle,children:"\u0412\u0441\u0435\u0433\u043e \u043f\u043e\u0442\u0440\u0430\u0447\u0435\u043d\u043e"}),Object(A.jsx)("div",{className:w.a.cardValue,children:n})]}),Object(A.jsxs)(U.a,{raised:!0,className:w.a.outputCard,children:[Object(A.jsx)("h3",{className:w.a.cardTitle,children:"\u041f\u0440\u0438\u0431\u044b\u043b\u044c"}),Object(A.jsx)("div",{className:w.a.cardValue,children:c})]})]})},Y=a(141),G=a(142),J=a(143),Q=a(144),R=a(145),W=a(146),z=a(148),K=function(e){var t=Object(c.useState)(!1),a=Object(d.a)(t,2),n=a[0],r=a[1],s=Object(c.useState)(e.value),i=Object(d.a)(s,2),u=i[0],l=i[1],o=function(){e.onSetValue(e.id,u),r(!1)};return Object(A.jsx)("div",{children:n?Object(A.jsx)("input",{type:"text",value:u,onChange:function(e){l(+e.currentTarget.value)},onBlur:o,onKeyPress:function(e){"Enter"===e.key&&o()},autoFocus:!0}):Object(A.jsx)("span",{onDoubleClick:function(){r(!0)},children:u})})},X=function(){var e=Object(c.useState)(y.slice(0,y.lastIndexOf("-"))),t=Object(d.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(0),s=Object(d.a)(r,2),i=s[0],u=s[1],l=Object(c.useState)(10),o=Object(d.a)(l,2),j=o[0],b=o[1],O=Object(q.useLiveQuery)((function(){return I.table("transactions").where("addDate").startsWith(a).toArray()}),[a]);if(!O)return null;var h=i>0?Math.max(0,(1+i)*j-(null===O||void 0===O?void 0:O.length)):0,v=O.filter((function(e){return"income"===e.type})).reduce((function(e,t){return e+t.value}),0)-O.filter((function(e){return"outcome"===e.type})).reduce((function(e,t){return e+t.value}),0),x=function(e,t){I.table("transactions").update(e,{value:t})};return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)("div",{children:[Object(A.jsx)("span",{children:"\u0412\u044b\u0431\u0435\u0440\u0438 \u043c\u0435\u0441\u044f\u0446 "}),Object(A.jsx)("input",{type:"month",value:a,onChange:function(e){return n(e.currentTarget.value)}})]}),Object(A.jsx)(Y.a,{component:E.a,style:{backgroundColor:"#3f51b545"},children:Object(A.jsxs)(G.a,{style:{minWidth:650},children:[Object(A.jsx)(J.a,{children:Object(A.jsxs)(Q.a,{children:[Object(A.jsx)(R.a,{children:"\u0414\u0435\u043d\u044c (\u0413\u0413\u0413\u0413-\u041c\u041c-\u0414\u0414)"}),Object(A.jsx)(R.a,{children:"\u0414\u043e\u0445\u043e\u0434/\u0440\u0430\u0441\u0445\u043e\u0434"}),Object(A.jsx)(R.a,{children:"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435"}),Object(A.jsx)(R.a,{children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})}),Object(A.jsxs)(W.a,{children:[(j>0?O.slice(i*j,i*j+j):O).map((function(e){return Object(A.jsxs)(Q.a,{children:[Object(A.jsx)(R.a,{children:e.addDate}),Object(A.jsx)(R.a,{children:"income"===e.type?"\u0414\u043e\u0445\u043e\u0434":"\u0420\u0430\u0441\u0445\u043e\u0434"}),Object(A.jsx)(R.a,{children:Object(A.jsx)(K,{value:e.value,onSetValue:x,id:e.id})}),Object(A.jsx)(R.a,{children:Object(A.jsx)("button",{onClick:function(){return t=e.id,void I.table("transactions").delete(t);var t},children:"X"})})]},e.id)})),h>0&&Object(A.jsx)(Q.a,{style:{height:53*h},children:Object(A.jsx)(R.a,{colSpan:6})})]})]})}),Object(A.jsx)(z.a,{component:"div",count:O.length,rowsPerPage:j,rowsPerPageOptions:[5,10,{label:"All",value:-1}],page:i,onPageChange:function(e,t){u(t)},onRowsPerPageChange:function(e){b(parseInt(e.target.value,10)),u(0)}}),Object(A.jsxs)("span",{children:["\u0412\u0441\u0435\u0433\u043e \u043f\u0440\u0438\u0431\u044b\u043b\u044c \u0437\u0430 \u043c\u0435\u0441\u044f\u0446: ",v]})]})},H=function(){return Object(A.jsxs)("div",{className:w.a.table,children:[Object(A.jsxs)("nav",{className:w.a.navbar,children:[Object(A.jsx)(V.b,{to:"/",exact:!0,className:w.a.navLink,activeClassName:w.a.activeLink,children:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f"}),Object(A.jsx)(V.b,{to:"/all",className:w.a.navLink,activeClassName:w.a.activeLink,children:"\u0412\u0441\u0435 \u0434\u043d\u0438"})]}),Object(A.jsxs)(E.a,{elevation:8,className:w.a.outputs,style:{backgroundColor:"#3f51b545"},children:[Object(A.jsx)(F.a,{path:"/",exact:!0,render:function(){return Object(A.jsx)(B,{})}}),Object(A.jsx)(F.a,{path:"/all",exact:!0,render:function(){return Object(A.jsx)(X,{})}})]})]})},Z=function(){return Object(A.jsxs)("div",{className:l.a.app,children:[Object(A.jsx)("h1",{className:l.a.title,children:"\u041b\u0430\u0432\u044d\u0445\u0430"}),Object(A.jsxs)("div",{className:l.a.container,children:[Object(A.jsx)(L,{}),Object(A.jsx)(H,{})]})]})},$=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,152)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),r(e),s(e)}))},ee=a(76),te=a(65),ae=Object(te.a)({inputsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.ADD_INCOMES:var a={id:Object(_.a)(),type:"income",value:t.value,addDate:t.day};return Object(p.a)(Object(p.a)({},e),{},{transactions:[].concat(Object(x.a)(e.transactions),[a])});case n.ADD_OUTCOMES:var c={id:Object(_.a)(),type:"outcome",value:t.value,addDate:t.day};return Object(p.a)(Object(p.a)({},e),{},{transactions:[].concat(Object(x.a)(e.transactions),[c])});default:return e}}}),ne=Object(te.b)(ae);i.a.render(Object(A.jsx)(r.a.StrictMode,{children:Object(A.jsx)(ee.a,{store:ne,children:Object(A.jsx)(V.a,{basename:"/finance_accounting",children:Object(A.jsx)(Z,{})})})}),document.getElementById("root")),$()},14:function(e,t,a){e.exports={table:"DataTable_table__3m1oN",navbar:"DataTable_navbar__1-cRz",navLink:"DataTable_navLink__2BwaU",activeLink:"DataTable_activeLink__W5e4v",outputCard:"DataTable_outputCard__3VbvJ",outputs:"DataTable_outputs__2Mzbg"}},53:function(e,t,a){e.exports={app:"App_app__2sPq6",title:"App_title__G5e3L",container:"App_container__1m9xk"}},54:function(e,t,a){e.exports={main:"DataInputs_main__1611N",incomes:"DataInputs_incomes__11UGi",outcomes:"DataInputs_outcomes__fq2fD"}},61:function(e,t,a){e.exports={textInput:"TextInput_textInput__LPbGB",datePick:"TextInput_datePick__2aI7b"}},92:function(e,t,a){}},[[101,1,2]]]);
//# sourceMappingURL=main.9fcd29ff.chunk.js.map